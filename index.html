<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ Special GAME ğŸŒŸ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden;
            background-color: #f0f0f0; /* Add a fallback body background */
        }
        .mobile-button {
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .no-zoom {
            touch-action: pan-x pan-y;
        }
        /* å®šç¾©åœ°é¼ å‹•ç•« */
        @keyframes whack-in {
            0% { transform: translateY(100%) scale(0.8); }
            50% { transform: translateY(-10%) scale(1.1); }
            100% { transform: translateY(0) scale(1); }
        }
        @keyframes whack-out {
            0% { transform: translateY(0) scale(1); }
            100% { transform: translateY(100%) scale(0.8); }
        }
        .mole-active {
            animation: whack-in 0.2s forwards;
        }
        .mole-hit {
            animation: whack-out 0.2s forwards;
            filter: grayscale(100%); /* é»æ“Šå¾Œè®Šç° */
        }
        .mole-disappear {
            animation: whack-out 0.2s forwards;
        }

        /* Candy Crush éŠæˆ²æ¨£å¼ */
        .candy-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 2px;
            width: 100%; /* ç¢ºä¿ç¶²æ ¼åœ¨å®¹å™¨å…§å¡«æ»¿ */
            max-width: 300px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ï¼Œé¿å…éå¤§ */
            margin: 0 auto; /* ç½®ä¸­ */
            aspect-ratio: 1 / 1; /* ä¿æŒæ­£æ–¹å½¢ */
            background-color: #8B4513; /* å·§å…‹åŠ›è‰²èƒŒæ™¯ */
            padding: 5px;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .candy-tile {
            width: 100%;
            padding-bottom: 100%; /* Make them square */
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.1); /* æ·ºè‰²èƒŒæ™¯ï¼Œè®“ç³–æœæ›´çªå‡º */
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.1s ease-out, opacity 0.2s ease-out;
            user-select: none;
            touch-action: manipulation;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
            will-change: transform, opacity;
            overflow: hidden;
        }
        .candy-tile.selected {
            border: 3px solid #FFD700; /* é»ƒé‡‘é‚Šæ¡†é¸ä¸­ */
            box-shadow: 0 0 15px #FFD700;
        }
        .candy-tile.clearing {
            animation: fadeOut 0.2s forwards; /* æ¶ˆé™¤æ™‚çš„å‹•ç•«æ™‚é–“ç¸®çŸ­ */
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.2); } /* ç¸®å°æ›´å¤šä»¥åŠ é€Ÿæ¶ˆå¤±æ„Ÿ */
        }
        .candy-tile.falling {
            animation: fallDown 0.2s ease-out forwards;
        }
        @keyframes fallDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .candy-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* èª¿æ•´ç³–æœè¡¨æƒ…ç¬¦è™Ÿçš„å¤§å° */
            font-size: 2.5rem; /* å¢å¤§ç³–æœè¡¨æƒ…ç¬¦è™Ÿå¤§å° */
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æŠ½å¡åœ–ç‰‡æ¨£å¼ */
        .card-image {
            width: 100%;
            max-width: 320px;
            height: 320px;
            border-radius: 0.75rem;
            border: 5px solid;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            transition: all 0.3s ease-in-out;
            object-fit: cover;
            aspect-ratio: 1 / 1;
            position: relative; /* For pseudo-elements and overlays */
            overflow: hidden; /* For shine effect */
            /* Ensure smooth animations */
            will-change: transform, box-shadow, border-color;
        }

        /* ç¨€æœ‰åº¦é‚Šæ¡†é¡è‰² (èˆ‡æ¨™ç±¤é¡è‰²å‘¼æ‡‰) */
        .card-image.sss { border-color: #FFD700; } /* SSS é‚Šæ¡†åˆå§‹ç‚ºé‡‘è‰²ï¼Œå‹•ç•«ä¸­è®Šå½©è™¹ */
        .card-image.ssr { border-color: #FFD700; } /* SSR é‚Šæ¡†åˆå§‹ç‚ºé‡‘è‰² */
        .card-image.sr { border-color: #BA55D3; } /* SR é‚Šæ¡†åˆå§‹ç‚ºç´«è‰² */
        .card-image.r { border-color: #87CEEB; } /* R é‚Šæ¡†åˆå§‹ç‚ºæ·ºè—è‰² */


        /* ç¨€æœ‰åº¦æ¨™ç±¤æ¨£å¼ - å¢å¼·è¦–è¦ºæ•ˆæœ */
        .rarity-tag {
            font-weight: bold;
            /* èª¿æ•´ padding ä»¥å„ªåŒ–é‘½çŸ³å½¢ç‹€çš„è¦–è¦ºæ¯”ä¾‹ */
            padding: 0.7rem 1.2rem; /* å‚ç›´å¢åŠ ï¼Œæ°´å¹³ç•¥æ¸›ï¼Œè®“é‘½çŸ³æ›´é£½æ»¿ */
            margin-top: 1.5rem;
            display: inline-flex; /* ä½¿ç”¨ flexbox ç¢ºä¿å…§å®¹å±…ä¸­ */
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            transform: translateY(0);
            border: 3px solid;
            will-change: background, color, text-shadow, border-color, box-shadow, transform, clip-path;
            /* é‘½çŸ³å½¢ç‹€ */
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            /* èƒ½é‡å…‰æšˆå‹•ç•« - åŸºç¤æ•ˆæœ */
            animation: energy-halo 2s infinite alternate, tag-float 3s infinite ease-in-out;
            /* å¯¶çŸ³åˆ‡å‰²é¢æ•ˆæœ */
            background-image: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%, rgba(0,0,0,0.2) 100%);
        }

        @keyframes energy-halo {
            0% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.3); }
            100% { box-shadow: 0 0 15px rgba(255, 255, 255, 0.7); }
        }
        
        /* æŠ½å¡å‹•ç•« - æ­ç¤º (é€šç”¨) */
        @keyframes flip-in {
            0% { transform: perspective(800px) rotateY(-90deg) scale(0.8); opacity: 0; }
            70% { transform: perspective(800px) rotateY(10deg) scale(1.05); opacity: 1; }
            100% { transform: perspective(800px) rotateY(0deg) scale(1); opacity: 1; }
        }

        /* é€šç”¨å¡ç‰‡è„ˆè¡/å‘¼å¸å‹•ç•« */
        @keyframes card-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }
        /* æ¨™ç±¤è¼•å¾®æµ®å‹•å‹•ç•« */
        @keyframes tag-float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }

        /* --- R ç­‰ç´š (è—è‰²ä¸»é¡Œï¼ŒåŸºç¤é–ƒå…‰æ•ˆæœ) --- */
        .rarity-tag.r {
            background: linear-gradient(45deg, #ADD8E6 0%, #87CEEB 50%, #B0E0E6 100%); /* æ·ºè—æ¼¸è®Š */
            color: #333;
            text-shadow: 1px 1px 4px rgba(255,255,255,0.7);
            border-color: #E0FFFF; /* æ·ºè—é‚Šæ¡† */
        }
        .card-reveal.r .card-image {
            animation: flip-in 0.6s ease-out forwards, r-flash 1.5s infinite alternate 0.6s;
        }
        @keyframes r-flash {
            0%, 100% { box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
            50% { box-shadow: 0 4px 20px rgba(135,206,235,0.6), 0 0 10px rgba(135,206,235,0.4); } /* æ·ºè—è‰²é–ƒå…‰ */
        }

        /* --- SR ç­‰ç´š (ç´«è‰²ä¸»é¡Œï¼Œæ˜Ÿæ˜Ÿè£é£¾ + é–ƒå…‰) --- */
        .rarity-tag.sr {
            background: linear-gradient(45deg, #8A2BE2 0%, #BA55D3 50%, #DA70D6 100%); /* ç´«ç¾…è˜­åˆ°è˜­èŠ±ç´«æ¼¸è®Š */
            color: white;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
            border-color: #D8BFD8; /* æ·ºç´«é‚Šæ¡† */
        }
        .card-reveal.sr .card-image {
            animation: flip-in 0.6s ease-out forwards, sr-glow 1.5s infinite alternate 0.6s;
            position: relative;
            overflow: hidden;
        }
        @keyframes sr-glow {
            0%, 100% { box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
            50% { box-shadow: 0 4px 25px rgba(138,43,226,0.7), 0 0 15px rgba(138,43,226,0.5); } /* ç´«è‰²å…‰æšˆ */
        }
        /* æ˜Ÿæ˜Ÿè£é£¾ */
        .card-reveal.sr .card-image::before,
        .card-reveal.sr .card-image::after {
            content: 'âœ¨'; /* æ˜Ÿæ˜Ÿç¬¦è™Ÿ */
            position: absolute;
            font-size: 1.5rem;
            opacity: 0;
            animation: sr-star-twinkle 2s infinite ease-out 0.8s; /* å»¶é²å‡ºç¾ */
            pointer-events: none;
        }
        .card-reveal.sr .card-image::before {
            top: 10%; left: 15%;
            animation-delay: 0.9s;
        }
        .card-reveal.sr .card-image::after {
            bottom: 15%; right: 20%;
            animation-delay: 1.2s;
            font-size: 1.2rem;
        }
        @keyframes sr-star-twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.2); }
        }


        /* --- SSR ç­‰ç´š (é‡‘è‰²ä¸»é¡Œï¼Œå¼·çƒˆå…‰æ•ˆ + æ˜Ÿæ˜Ÿé–ƒçˆ) --- */
        .rarity-tag.ssr {
            background: linear-gradient(45deg, #FFD700 0%, #FFA500 60%, #FFCC00 100%); /* é‡‘æ©™æ¼¸è®Š */
            color: #8B4513;
            text-shadow: 1px 1px 4px rgba(255,255,255,0.8);
            border-color: #FFECB3; /* æ·ºé‡‘é‚Šæ¡† */
        }
        @keyframes ssr-tag-glow {
            0%, 100% { box-shadow: 0 6px 15px rgba(0,0,0,0.4); }
            50% { box-shadow: 0 6px 20px rgba(255,215,0,0.8), 0 0 15px rgba(255,215,0,0.5); }
        }
        .card-reveal.ssr .card-image {
            animation: flip-in 0.6s ease-out forwards, ssr-card-glow 1.5s infinite alternate 0.6s;
            position: relative;
            overflow: hidden;
        }
        @keyframes ssr-card-glow {
            0%, 100% { box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
            50% { box-shadow: 0 4px 25px rgba(255,215,0,0.8), 0 0 20px rgba(255,215,0,0.7); } /* é‡‘è‰²å¼·çƒˆå…‰æšˆ */
        }
        /* æ˜Ÿæ˜Ÿé–ƒçˆ */
        .card-reveal.ssr .card-image::before,
        .card-reveal.ssr .card-image::after {
            content: '';
            position: absolute;
            background: radial-gradient(circle at center, #FFF 0%, transparent 70%);
            animation: ssr-star-burst 1.5s infinite ease-out 0.8s;
            pointer-events: none;
        }
        .card-reveal.ssr .card-image::before {
            width: 30px; height: 30px;
            top: 20%; left: 70%;
            animation-delay: 0.9s;
        }
        .card-reveal.ssr .card-image::after {
            width: 20px; height: 20px;
            bottom: 10%; left: 30%;
            animation-delay: 1.2s;
        }
        @keyframes ssr-star-burst {
            0% { transform: scale(0); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }


        /* --- SSS ç­‰ç´š (å½©è™¹ä¸»é¡Œï¼Œå‹•æ…‹æ¼¸è®Š + é‘½çŸ³ç‰¹æ•ˆ) --- */
        .rarity-tag.sss {
            background: linear-gradient(45deg, #FF0000, #FF7F00, #FFFF00, #00FF00, #0000FF, #4B0082, #9400D3); /* å½©è™¹æ¼¸è®Š */
            background-size: 400% 400%; /* ç‚ºäº†å‹•æ…‹æ¼¸è®Š */
            color: white;
            text-shadow: 0 0 8px #fff, 0 0 12px #00BFFF, 0 0 15px #1E90FF;
            border-color: #E0FFFF;
            animation: pulse-glow 1.5s infinite alternate, sss-rainbow-bg 10s infinite linear;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.6), inset 0 0 15px rgba(255, 255, 255, 0.7); /* å¼·çƒˆå…§å¤–ç™¼å…‰ */
        }
        @keyframes sss-rainbow-bg {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 5px rgba(255, 255, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.6), inset 0 0 15px rgba(255, 255, 255, 0.7); }
            100% { box-shadow: 0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 5px rgba(255, 255, 255, 0.5); }
        }

        .card-reveal.sss .card-image {
            animation: flip-in 0.6s ease-out forwards, sss-pulse-scale 2s infinite alternate 0.6s, sss-border-rainbow 5s infinite linear 0.6s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4); /* åŸºç¤é™°å½± */
        }
        @keyframes sss-pulse-scale {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        @keyframes sss-border-rainbow {
            0% { border-color: #FF0000; box-shadow: 0 4px 20px rgba(255,0,0,0.7); }
            16% { border-color: #FF7F00; box-shadow: 0 4px 20px rgba(255,127,0,0.7); }
            33% { border-color: #FFFF00; box-shadow: 0 4px 20px rgba(255,255,0,0.7); }
            50% { border-color: #00FF00; box-shadow: 0 4px 20px rgba(0,255,0,0.7); }
            66% { border-color: #0000FF; box-shadow: 0 4px 20px rgba(0,0,255,0.7); }
            83% { border-color: #4B0082; box-shadow: 0 4px 20px rgba(75,0,130,0.7); }
            100% { border-color: #9400D3; box-shadow: 0 4px 20px rgba(148,0,211,0.7); }
        }
        /* SSS å¡ç‰‡å…§éƒ¨çš„é‘½çŸ³é–ƒçˆæ•ˆæœ */
        .card-reveal.sss .card-image::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255,255,255,0.8) 0%, transparent 10%),
                radial-gradient(circle at 80% 30%, rgba(255,255,255,0.8) 0%, transparent 10%),
                radial-gradient(circle at 50% 70%, rgba(255,255,255,0.8) 0%, transparent 10%);
            background-size: 200% 200%;
            animation: sss-diamond-sparkle 1.5s infinite alternate;
            pointer-events: none;
            mix-blend-mode: screen; /* è®“å…‰æ•ˆç–ŠåŠ æ›´è‡ªç„¶ */
        }
        @keyframes sss-diamond-sparkle {
            0% { transform: scale(0.5) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: scale(0.5) rotate(360deg); opacity: 0.5; }
        }


        /* --- æŠ½å¡ä¸­å‹•ç•« (å¡èƒŒè¨­è¨ˆ) --- */
        @keyframes card-shuffling {
            0% { transform: perspective(600px) rotateY(0deg); }
            50% { transform: perspective(600px) rotateY(180deg); }
            100% { transform: perspective(600px) rotateY(360deg); }
        }
        @keyframes card-back-shine {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        @keyframes border-shimmer {
            0% { border-image-source: linear-gradient(45deg, #FFD700, #FF69B4, #4169E1); }
            25% { border-image-source: linear-gradient(45deg, #FF69B4, #4169E1, #FFD700); }
            50% { border-image-source: linear-gradient(45deg, #4169E1, #FFD700, #FF69B4); }
            75% { border-image-source: linear-gradient(45deg, #FF69B4, #4169E1, #FFD700); }
            100% { border-image-source: linear-gradient(45deg, #FFD700, #FF69B4, #4169E1); }
        }
        @keyframes pulse-glow-symbol {
            0% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
            100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
        }

        .card-shuffling {
            width: 100%;
            max-width: 320px;
            height: 320px;
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            border: 5px solid;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #4b0082, #8a2be2); /* ç´«è‰²æ¼¸è®Šåº•è‰² */
            animation: card-shuffling 1.5s infinite linear;
            border-image: linear-gradient(45deg, #FFD700, #FF69B4, #4169E1) 1; /* æ¼¸è®Šé‚Šæ¡† */
            animation: card-shuffling 1.5s infinite linear, border-shimmer 2s infinite linear;
            will-change: transform, background, border-image, box-shadow;
        }

        .card-shuffling::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,.3), transparent); /* é–ƒçˆæµå…‰ */
            background-size: 200% 100%;
            animation: card-back-shine 2s infinite linear;
            pointer-events: none;
            will-change: background-position;
        }
        .card-shuffling::after {
            content: 'âœ¨'; /* æ›¿æ›ç‚ºæ›´æŠ½è±¡çš„ç¬¦è™Ÿ */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateY(0deg);
            font-size: 5rem;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
            animation: pulse-glow-symbol 2s infinite alternate;
            will-change: transform, opacity, text-shadow;
        }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const BirthdayGameApp = () => {
            const [currentPoints, setCurrentPoints] = useState(0);
            const [currentPage, setCurrentPage] = useState('home');
            const [gameResults, setGameResults] = useState({});
            const [gameState, setGameState] = useState('ready');
            const [drawResult, setDrawResult] = useState(null);
            const [recentDrawnCards, setRecentDrawnCards] = useState([]);
            const RECENT_DRAWN_LIMIT = 3;

            console.log('æ¸²æŸ“ç‹€æ…‹:', gameState, 'é»æ•¸:', currentPoints);

            const games = [
                { id: 'guess-number', name: '1A2BçŒœæ•¸å­—', points: 3, difficulty: 'ç°¡å–®', emoji: 'ğŸ”¢' },
                { id: 'memory-card', name: 'ç¿»ç‰Œé€£é€£çœ‹', points: 3, difficulty: 'ä¸­ç­‰', emoji: 'ğŸ´' },
                { id: 'whack-a-mole', name: 'æ‰“åœ°é¼ ', points: 4, difficulty: 'ä¸­ç­‰', emoji: 'ğŸ­' },
                { id: 'candy-crush', name: 'ç³–æœæ¶ˆæ¶ˆæ¨‚', points: 5, difficulty: 'ç°¡å–®', emoji: 'ğŸ­' },
            ];
            const completeGame = (gameId, points) => {
                setCurrentPoints(prev => prev + points);
                setGameResults(prev => ({
                    ...prev,
                    [gameId]: (prev[gameId] || 0) + 1
                }));
            };

            const cardImages = {
                sss: [
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/sss.jpg?raw=true', // SSS åœ–ç‰‡åç¨±ä¿®æ­£
                ],
                ssr: [
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/ssr1.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/ssr2.jpg',
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/ssr3.jpg?raw=true',
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/ssr4.jpg?raw=true'
                ],
                sr: [
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr1.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr2.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr3.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr4.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr5.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr6.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr7.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr8.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr9.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/sr10.jpg?raw=true'
                ],
                r: [
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r1.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r2.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r3.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r4.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r5.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r6.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r7.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r8.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r9.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r10.jpg',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r11.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r12.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r13.jpg?raw=true',
                    'https://raw.githubusercontent.com/Avis0930/my-surprise-game/main/images/r14.jpg?raw=true',
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/r15.jpg?raw=true',
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/r16.jpg?raw=true',
                    'https://github.com/Avis0930/my-surprise-game/blob/main/images/r17.jpg?raw=true'
                ]
            };

            const actualCardImages = cardImages;

            useEffect(() => {
                console.log('é–‹å§‹é è¼‰å…¥åœ–ç‰‡...');
                Object.values(actualCardImages).forEach(imageArray => {
                    imageArray.forEach(url => {
                        const img = new Image();
                        img.src = url;
                        img.onload = () => console.log(`åœ–ç‰‡è¼‰å…¥å®Œæˆ: ${url}`);
                        img.onerror = () => console.error(`åœ–ç‰‡è¼‰å…¥å¤±æ•—: ${url}`);
                    });
                });
            }, []);

            // æ‰“åœ°é¼ éŠæˆ²çµ„ä»¶
            const WhackAMoleGame = () => {
                const [score, setScore] = useState(0);
                const [timeLeft, setTimeLeft] = useState(30);
                const [activeHole, setActiveHole] = useState(null);
                const [gameOver, setGameOver] = useState(false);
                const [gameStarted, setGameStarted] = useState(false);
                const timerRef = useRef(null);
                const moleTimerRef = useRef(null);

                const moles = Array.from({ length: 9 }, (_, i) => i);

                const startGame = () => {
                    setScore(0);
                    setTimeLeft(30);
                    setActiveHole(null);
                    setGameOver(false);
                    setGameStarted(true);
                    startTimer();
                    showMole();
                };

                const startTimer = () => {
                    timerRef.current = setInterval(() => {
                        setTimeLeft(prevTime => {
                            if (prevTime <= 1) {
                                clearInterval(timerRef.current);
                                clearInterval(moleTimerRef.current);
                                setGameOver(true);
                                setActiveHole(null);
                                return 0;
                            }
                            return prevTime - 1;
                        });
                    }, 1000);
                };

                const showMole = () => {
                    const randomDelay = Math.random() * (1.2 - 0.8) + 0.8;
                    moleTimerRef.current = setTimeout(() => {
                        let newHole = Math.floor(Math.random() * moles.length);
                        while (newHole === activeHole) {
                            newHole = Math.floor(Math.random() * moles.length);
                        }
                        setActiveHole(newHole);

                        const disappearDelay = Math.random() * (2.5 - 1.5) + 1.5;
                        setTimeout(() => {
                            if (activeHole === newHole) {
                                setActiveHole(null);
                            }
                            if (!gameOver) {
                                showMole();
                            }
                        }, disappearDelay * 1000);
                    }, randomDelay * 1000);
                };

                const whackMole = (holeIndex) => {
                    if (gameOver || activeHole !== holeIndex) {
                        return;
                    }
                    setScore(prevScore => prevScore + 1);
                    setActiveHole(null);
                    
                    if (!gameOver) {
                        clearTimeout(moleTimerRef.current);
                        showMole();
                    }
                };

                useEffect(() => {
                    return () => {
                        clearInterval(timerRef.current);
                        clearTimeout(moleTimerRef.current);
                    };
                }, []);

                useEffect(() => {
                    if (gameOver) {
                        if (score >= 15) {
                            completeGame('whack-a-mole', 4);
                            setCurrentPage('success-whack-a-mole');
                        }
                    }
                }, [gameOver, score, completeGame, setCurrentPage]);

                const formatTime = (seconds) => {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                };

                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-300 via-lime-400 to-emerald-500 p-4 no-zoom flex items-center justify-center">
                        <div className="max-w-md mx-auto text-center w-full">
                            <div className="bg-white/95 backdrop-blur-sm border-4 border-green-500 shadow-xl rounded-2xl overflow-hidden p-6 mb-6">
                                <h2 className="text-center font-black text-xl text-green-700 mb-2">ğŸ”¨ æ‰“åœ°é¼ éŠæˆ²</h2>
                                <p className="text-center text-sm text-gray-600 font-semibold mb-4">
                                    æ“Šä¸­åœ°é¼ ç²å¾—åˆ†æ•¸ï¼Œæ™‚é–“å…§é”åˆ°15åˆ†å³å¯éé—œï¼
                                </p>
                                <div className="flex justify-between items-center mb-4 bg-lime-100 rounded-full px-4 py-2 border-2 border-lime-200">
                                    <div className="text-lg font-bold text-green-700">åˆ†æ•¸: {score}</div>
                                    <div className={`text-xl font-bold ${timeLeft <= 10 && !gameOver ? 'text-red-500 animate-pulse' : 'text-green-700'}`}>
                                        æ™‚é–“: {formatTime(timeLeft)}
                                    </div>
                                </div>

                                {!gameStarted && !gameOver ? (
                                    <button
                                        onClick={startGame}
                                        className="w-full bg-gradient-to-r from-green-500 to-green-700 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                    >
                                        ğŸš€ é–‹å§‹éŠæˆ²
                                    </button>
                                ) : gameOver ? (
                                    <div className="space-y-4">
                                        <div className="text-4xl font-black text-green-700">
                                            {score >= 15 ? 'ğŸ‰ æ­å–œéé—œï¼' : 'ğŸ˜… æ™‚é–“çµæŸï¼'}
                                        </div>
                                        <div className="text-xl font-bold text-gray-700 bg-gray-100 rounded-full px-4 py-2">
                                            æœ€çµ‚åˆ†æ•¸: {score}
                                        </div>
                                        {score < 15 && (
                                            <div className="text-lg font-bold text-red-600 bg-red-100 rounded-full px-4 py-2">
                                                æœªé”åˆ° {15} åˆ†ï¼Œæ²’æœ‰ç²å¾—çå‹µå“¦ï¼
                                            </div>
                                        )}
                                        <button
                                            onClick={startGame}
                                            className="w-full bg-gradient-to-r from-blue-400 to-blue-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                        >
                                            ğŸ”„ å†ç©ä¸€æ¬¡
                                        </button>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-3 gap-3 bg-gradient-to-br from-yellow-700 to-orange-800 p-4 rounded-xl border-4 border-yellow-600 shadow-inner">
                                        {moles.map((holeIndex) => (
                                            <div
                                                key={holeIndex}
                                                className="relative w-full aspect-square bg-gradient-to-br from-yellow-900 to-yellow-700 rounded-full flex items-center justify-center overflow-hidden"
                                                style={{ boxShadow: 'inset 0 0 10px rgba(0,0,0,0.5)' }}
                                                onClick={() => whackMole(holeIndex)}
                                            >
                                                {activeHole === holeIndex ? (
                                                    <span className="absolute inset-0 flex items-center justify-center text-6xl cursor-pointer select-none mole-active">
                                                            ğŸ¹
                                                    </span>
                                                ) : (
                                                    <span className="text-4xl text-yellow-600 select-none">ğŸ•³ï¸</span>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            <button
                                onClick={() => setCurrentPage('home')}
                                className="w-full bg-gradient-to-r from-gray-400 to-gray-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                            >
                                ğŸ  å›åˆ°é¦–é 
                            </button>
                        </div>
                    </div>
                );
            };

            // ç³–æœæ¶ˆæ¶ˆæ¨‚éŠæˆ²çµ„ä»¶
            const CandyCrushGame = () => {
                const candies = ['ğŸ­', 'ğŸ¬', 'ğŸ«', 'ğŸ§', 'ğŸ©'];
                const rows = 6;
                const cols = 6;
                const targetScore = 500;

                const [grid, setGrid] = useState([]);
                const [score, setScore] = useState(0);
                const [timeLeft, setTimeLeft] = useState(30);
                const [gameOver, setGameOver] = useState(false);
                const [gameStarted, setGameStarted] = useState(false);
                const [selectedCandy, setSelectedCandy] = useState(null);
                const gameIntervalRef = useRef(null);

                const generateInitialGrid = () => {
                    const newGrid = Array(rows).fill(null).map(() => Array(cols).fill(null));
                    for (let r = 0; r < rows; r++) {
                        for (let c = 0; c < cols; c++) {
                            newGrid[r][c] = { emoji: candies[Math.floor(Math.random() * candies.length)], status: 'normal' };
                        }
                    }
                    let hasMatch = true;
                    while (hasMatch) {
                        hasMatch = false;
                        const matches = checkMatches(newGrid);
                        if (matches.length > 0) {
                            hasMatch = true;
                            matches.forEach(({ r, c }) => {
                                newGrid[r][c] = { emoji: candies[Math.floor(Math.random() * candies.length)], status: 'normal' };
                            });
                        }
                    }
                    return newGrid;
                };

                const checkMatches = (currentGrid) => {
                    const matches = new Set();
                
                    for (let r = 0; r < rows; r++) {
                        for (let c = 0; c <= cols - 3; c++) {
                            const candy = currentGrid[r][c].emoji;
                            if (candy && candy === currentGrid[r][c + 1].emoji && candy === currentGrid[r][c + 2].emoji) {
                                let lineLength = 3;
                                while (c + lineLength < cols && candy === currentGrid[r][c + lineLength].emoji) {
                                    lineLength++;
                                }
                                for (let i = 0; i < lineLength; i++) {
                                    matches.add(`${r}-${c + i}`);
                                }
                            }
                        }
                    }
                
                    for (let c = 0; c < cols; c++) {
                        for (let r = 0; r <= rows - 3; r++) {
                            const candy = currentGrid[r][c].emoji;
                            if (candy && candy === currentGrid[r + 1][c].emoji && candy === currentGrid[r + 2][c].emoji) {
                                let lineLength = 3;
                                while (r + lineLength < rows && candy === currentGrid[r + lineLength][c].emoji) {
                                    lineLength++;
                                }
                                for (let i = 0; i < lineLength; i++) {
                                    matches.add(`${r + i}-${c}`);
                                }
                            }
                        }
                    }
                    return Array.from(matches).map(pos => {
                        const [r, c] = pos.split('-').map(Number);
                        return { r, c };
                    });
                };
                
                const processMatches = async (initialGrid) => {
                    let currentGrid = JSON.parse(JSON.stringify(initialGrid));
                    let totalScoreFromThisMove = 0;

                    while (true) {
                        const matches = checkMatches(currentGrid);
                        if (matches.length === 0) {
                            break;
                        }

                        const matchedGroups = groupMatches(matches);
                        matchedGroups.forEach(group => {
                            const length = group.length;
                            if (length === 3) totalScoreFromThisMove += 30;
                            else if (length === 4) totalScoreFromThisMove += 60;
                            else if (length >= 5) totalScoreFromThisMove += 100;
                        });

                        matches.forEach(({ r, c }) => {
                            currentGrid[r][c].status = 'clearing';
                        });
                        await new Promise(resolve => requestAnimationFrame(() => {
                            setGrid(JSON.parse(JSON.stringify(currentGrid)));
                            resolve();
                        }));

                        await new Promise(resolve => setTimeout(resolve, 200));

                        matches.forEach(({ r, c }) => {
                            currentGrid[r][c] = { emoji: null, status: 'cleared' };
                        });

                        for (let c = 0; c < cols; c++) {
                            let writeRow = rows - 1;
                            for (let r = rows - 1; r >= 0; r--) {
                                if (currentGrid[r][c].emoji !== null) {
                                    currentGrid[writeRow][c] = currentGrid[r][c];
                                    writeRow--;
                                }
                            }
                            for (let r = writeRow; r >= 0; r--) {
                                currentGrid[r][c] = { emoji: candies[Math.floor(Math.random() * candies.length)], status: 'falling' };
                            }
                        }
                        
                        await new Promise(resolve => requestAnimationFrame(() => {
                            setGrid(JSON.parse(JSON.stringify(currentGrid)));
                            resolve();
                        }));

                        await new Promise(resolve => setTimeout(resolve, 200));

                        for (let r = 0; r < rows; r++) {
                            for (let c = 0; c < cols; c++) {
                                currentGrid[r][c].status = 'normal';
                            }
                        }
                        await new Promise(resolve => requestAnimationFrame(() => {
                            setGrid(JSON.parse(JSON.stringify(currentGrid)));
                            resolve();
                        }));
                    }
                    setScore(s => s + totalScoreFromThisMove);
                };

                const groupMatches = (matches) => {
                    const visited = new Set();
                    const groups = [];

                    matches.forEach(match => {
                        const { r, c } = match;
                        if (!visited.has(`${r}-${c}`)) {
                            const currentGroup = [];
                            const queue = [{ r, c }];
                            visited.add(`${r}-${c}`);
                            
                            while (queue.length > 0) {
                                const { r: currR, c: currC } = queue.shift();
                                currentGroup.push({ r: currR, c: currC });

                                const directions = [
                                    [-1, 0], [1, 0], [0, -1], [0, 1]
                                ];

                                for (const [dr, dc] of directions) {
                                    const newR = currR + dr;
                                    const newC = currC + dc;

                                    if (
                                        matches.some(m => m.r === newR && m.c === newC) &&
                                        !visited.has(`${newR}-${newC}`)
                                    ) {
                                        visited.add(`${newR}-${newC}`);
                                        queue.push({ r: newR, c: newC });
                                    }
                                }
                            }
                            groups.push(currentGroup);
                        }
                    });
                    return groups;
                };

                const startGame = () => {
                    setScore(0);
                    setTimeLeft(30);
                    setGameOver(false);
                    setGameStarted(true);
                    setSelectedCandy(null);
                    const initialGrid = generateInitialGrid();
                    setGrid(initialGrid);

                    clearInterval(gameIntervalRef.current);
                    gameIntervalRef.current = setInterval(() => {
                        setTimeLeft(prevTime => {
                            if (prevTime <= 1) {
                                clearInterval(gameIntervalRef.current);
                                setGameOver(true);
                                return 0;
                            }
                            return prevTime - 1;
                        });
                    }, 1000);
                };

                useEffect(() => {
                    if (gameOver) {
                        clearInterval(gameIntervalRef.current);
                        if (score >= targetScore) {
                            completeGame('candy-crush', 5);
                            setCurrentPage('success-candy-crush');
                        }
                    }
                }, [gameOver, score, targetScore, completeGame, setCurrentPage]);

                useEffect(() => {
                    return () => clearInterval(gameIntervalRef.current);
                }, []);

                const handleCandyClick = async (r, c) => {
                    if (gameOver || !gameStarted) return;

                    if (selectedCandy) {
                        const prevR = selectedCandy.r;
                        const prevC = selectedCandy.c;

                        const isAdjacent = (
                            (Math.abs(r - prevR) === 1 && c === prevC) ||
                            (Math.abs(c - prevC) === 1 && r === prevR)
                        );

                        if (isAdjacent) {
                            const newGrid = JSON.parse(JSON.stringify(grid));
                            [newGrid[r][c].emoji, newGrid[prevR][prevC].emoji] = [newGrid[prevR][prevC].emoji, newGrid[r][c].emoji];
                            
                            await new Promise(resolve => requestAnimationFrame(() => {
                                setGrid(newGrid);
                                resolve();
                            }));
                            
                            const hasMatch = checkMatches(newGrid).length > 0;
                            if (hasMatch) {
                                await processMatches(newGrid);
                            } else {
                                await new Promise(resolve => setTimeout(resolve, 200));
                                [newGrid[r][c].emoji, newGrid[prevR][prevC].emoji] = [newGrid[prevR][prevC].emoji, newGrid[r][c].emoji];
                                await new Promise(resolve => requestAnimationFrame(() => {
                                    setGrid(newGrid);
                                }));
                            }
                        }
                        setSelectedCandy(null);
                    } else {
                        setSelectedCandy({ r, c });
                    }
                };

                const formatTime = (seconds) => {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                };

                return (
                    <div className="min-h-screen bg-gradient-to-br from-red-300 via-orange-400 to-yellow-500 p-4 no-zoom flex items-center justify-center">
                        <div className="max-w-md mx-auto text-center w-full">
                            <div className="bg-white/95 backdrop-blur-sm border-4 border-orange-500 shadow-xl rounded-2xl overflow-hidden p-6 mb-6">
                                <h2 className="text-center font-black text-xl text-orange-700 mb-2">ğŸ¬ ç³–æœæ¶ˆæ¶ˆæ¨‚</h2>
                                <p className="text-center text-sm text-gray-600 font-semibold mb-4">
                                    äº¤æ›ç³–æœï¼Œé”æˆ3å€‹ä»¥ä¸Šé€£ç·šæ¶ˆé™¤ï¼ç›®æ¨™åˆ†æ•¸ {targetScore}ï¼
                                </p>
                                <div className="flex justify-between items-center mb-4 bg-yellow-100 rounded-full px-4 py-2 border-2 border-yellow-200">
                                    <div className="text-lg font-bold text-orange-700">åˆ†æ•¸: {score}</div>
                                    <div className={`text-xl font-bold ${timeLeft <= 10 && !gameOver ? 'text-red-500 animate-pulse' : 'text-orange-700'}`}>
                                        æ™‚é–“: {formatTime(timeLeft)}
                                    </div>
                                </div>

                                {!gameStarted && !gameOver ? (
                                    <button
                                        onClick={startGame}
                                        className="w-full bg-gradient-to-r from-orange-500 to-orange-700 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                    >
                                        ğŸš€ é–‹å§‹éŠæˆ²
                                    </button>
                                ) : gameOver ? (
                                    <div className="space-y-4">
                                        <div className="text-4xl font-black text-orange-700">
                                            {score >= targetScore ? 'ğŸ‰ æ­å–œéé—œï¼' : 'ğŸ˜… æ™‚é–“çµæŸï¼'}
                                        </div>
                                        <div className="text-xl font-bold text-gray-700 bg-gray-100 rounded-full px-4 py-2">
                                            æœ€çµ‚åˆ†æ•¸: {score}
                                        </div>
                                        {score < targetScore && (
                                            <div className="text-lg font-bold text-red-600 bg-red-100 rounded-full px-4 py-2">
                                                æœªé”åˆ° {targetScore} åˆ†ï¼Œæ²’æœ‰ç²å¾—çå‹µå“¦ï¼
                                            </div>
                                        )}
                                        <button
                                            onClick={startGame}
                                            className="w-full bg-gradient-to-r from-blue-400 to-blue-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                        >
                                            ğŸ”„ å†ç©ä¸€æ¬¡
                                        </button>
                                    </div>
                                ) : (
                                    <div className="candy-grid">
                                        {grid.map((row, rIdx) =>
                                            row.map((candyData, cIdx) => (
                                                <div
                                                    key={`${rIdx}-${cIdx}`}
                                                    className={`candy-tile ${selectedCandy?.r === rIdx && selectedCandy?.c === cIdx ? 'selected' : ''} ${candyData.status === 'clearing' ? 'clearing' : ''} ${candyData.status === 'falling' ? 'falling' : ''}`}
                                                    onClick={() => handleCandyClick(rIdx, cIdx)}
                                                >
                                                    <span className="candy-content">{candyData.emoji}</span>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                )}
                            </div>

                            <button
                                onClick={() => setCurrentPage('home')}
                                className="w-full bg-gradient-to-r from-gray-400 to-gray-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                            >
                                ğŸ  å›åˆ°é¦–é 
                            </button>
                        </div>
                    </div>
                );
            };

            // æŠ½å¡æ©Ÿåˆ¶
            const addPoints = () => {
                setCurrentPoints(p => p + 10);
                setGameState('ready');
                console.log('+10é»ï¼Œé‡ç½®ç‚ºready');
            };

            const drawCard = () => {
                if (currentPoints < 5 || gameState !== 'ready') return;
                setCurrentPoints(p => p - 5);
                setGameState('drawing');
                console.log('é–‹å§‹æŠ½å¡ï¼Œç‹€æ…‹->drawing');
                
                setTimeout(() => {
                    const rarityRoll = Math.random();
                    let chosenCardUrl = null;
                    let chosenType = '';
                    let availableCards = [];

                    // SSS: 1% (0.0 - 0.01)
                    // SSR: 19% (0.01 - 0.20)
                    // SR: 30% (0.20 - 0.50)
                    // R: 50% (0.50 - 1.00)

                    if (rarityRoll < 0.01) {
                        chosenType = 'sss';
                        availableCards = actualCardImages.sss;
                    } else if (rarityRoll < 0.2) {
                        chosenType = 'ssr';
                        availableCards = actualCardImages.ssr;
                    } else if (rarityRoll < 0.5) {
                        chosenType = 'sr';
                        availableCards = actualCardImages.sr;
                    } else {
                        chosenType = 'r';
                        availableCards = actualCardImages.r;
                    }

                    const filteredCards = availableCards.filter(url => !recentDrawnCards.includes(url));

                    if (filteredCards.length > 0) {
                        chosenCardUrl = filteredCards[Math.floor(Math.random() * filteredCards.length)];
                    } else {
                        chosenCardUrl = availableCards[Math.floor(Math.random() * availableCards.length)];
                        setRecentDrawnCards([]);
                        console.log('æ‰€æœ‰å¡ç‰‡å·²æŠ½å–éä¸€è¼ªï¼Œé‡ç½®è¿‘æœŸæŠ½å¡åˆ—è¡¨ã€‚');
                    }

                    setRecentDrawnCards(prev => {
                        const newRecent = [...prev, chosenCardUrl];
                        if (newRecent.length > RECENT_DRAWN_LIMIT) {
                            return newRecent.slice(1);
                        }
                        return newRecent;
                    });
                    
                    setDrawResult({ type: chosenType, url: chosenCardUrl });
                    setGameState('result');
                    console.log('è¨ˆæ™‚å™¨åŸ·è¡Œï¼Œç‹€æ…‹->result');
                }, 1000);
            };

            const resetGame = () => {
                setGameState('ready');
                console.log('é‡ç½®ï¼Œç‹€æ…‹->ready');
                setDrawResult(null);
            };

            // é¦–é 
            const HomePage = () => (
                <div className="min-h-screen bg-gradient-to-br from-cyan-300 via-purple-400 to-pink-400 p-4 no-zoom">
                    <div className="max-w-sm mx-auto">
                        <div className="text-center mb-6">
                            <div className="bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-2xl border-4 border-white">
                                <h1 className="text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 to-pink-500 mb-2">
                                    Special GAME
                                </h1>
                                <p className="text-purple-700 font-semibold text-sm">å®ŒæˆéŠæˆ²ç²å¾—é»æ•¸ï¼Œé›†æ»¿5é»æŠ½é©šå–œå¡ç‰‡ï¼</p>
                                <div className="flex justify-center space-x-2 mt-3">
                                    <span className="text-2xl">ğŸ’–</span>
                                    <span className="text-2xl">ğŸŒˆ</span>
                                    <span className="text-2xl">âœ¨</span>
                                </div>
                            </div>
                        </div>

                        <div className="fixed top-4 left-4 space-y-2">
                            <button onClick={addPoints} className="bg-red-600 text-white px-4 py-2 rounded font-bold">
                                +10é»
                            </button>
                            <button onClick={resetGame} className="bg-gray-600 text-white px-4 py-2 rounded font-bold">
                                é‡ç½®
                            </button>
                        </div>

                        <div className="mb-6 bg-gradient-to-r from-yellow-300 to-orange-300 border-4 border-white shadow-xl rounded-2xl p-6 text-center">
                            <div className="text-2xl font-black text-white mb-2 drop-shadow-lg">
                                â­ é»æ•¸: {currentPoints} â­
                            </div>
                            <div className="text-base font-bold text-purple-800 bg-white/80 rounded-full px-4 py-1">
                                {Math.floor(currentPoints / 5)} æ¬¡æŠ½å¡æ©Ÿæœƒ ğŸ´
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-yellow-300 via-pink-300 to-purple-300 border-4 border-white rounded-2xl p-6 mb-6">
                            <h3 className="font-black text-xl mb-4 text-white text-center">âœ¨ æ‚¨çš„å¡ç‰‡ âœ¨</h3>
                            
                            <div className="text-center">
                                {gameState === 'ready' && (
                                    <div>
                                        {currentPoints >= 5 ? (
                                            <button
                                                onClick={drawCard}
                                                className="w-full bg-cyan-500 text-white px-6 py-4 rounded-full text-lg font-black hover:bg-cyan-600"
                                            >
                                                ğŸ´ æŠ½å¡ç‰‡ï¼(-5é») âœ¨
                                            </button>
                                        ) : (
                                            <div className="bg-white/90 rounded-full px-4 py-3">
                                                <p className="text-purple-700 font-bold">é‚„éœ€è¦ {5 - currentPoints} é»æ‰èƒ½æŠ½å¡ âœ¨</p>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {gameState === 'drawing' && (
                                    <div className="flex flex-col items-center justify-center space-y-4">
                                        <div className="card-shuffling">
                                        </div>
                                        <div className="text-white font-bold text-xl animate-pulse">æŠ½å¡ä¸­...</div>
                                    </div>
                                )}

                                {gameState === 'result' && drawResult && (
                                    <div className={`flex flex-col items-center justify-center space-y-4 card-reveal ${drawResult.type}`}>
                                        {drawResult.url && (
                                            <img
                                                src={drawResult.url}
                                                alt={drawResult.type}
                                                className={`card-image ${drawResult.type}`}
                                            />
                                        )}
                                        <div className={`rarity-tag ${drawResult.type}`}>
                                            {drawResult.type.toUpperCase()}
                                        </div>
                                        
                                        <button
                                            onClick={resetGame}
                                            className="w-full bg-purple-500 text-white px-6 py-3 rounded-full font-bold hover:bg-purple-600"
                                        >
                                            ç¹¼çºŒéŠæˆ² ğŸ’«
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="space-y-4">
                            {games.map((game, index) => {
                                const gradients = [
                                    'from-pink-400 to-rose-400',
                                    'from-cyan-400 to-blue-400',
                                    'from-purple-400 to-violet-400',
                                    'from-green-400 to-emerald-400'
                                ];
                                return (
                                    <div key={game.id} className={`bg-gradient-to-r ${gradients[index % gradients.length]} border-4 border-white shadow-xl rounded-2xl`}>
                                        <div className="p-4">
                                            <div className="flex justify-between items-center">
                                                <div className="flex-1">
                                                    <h3 className="font-black text-lg text-white drop-shadow-lg">
                                                        {game.emoji} {game.name}
                                                    </h3>
                                                    <p className="text-sm text-white/90 font-semibold">
                                                        {game.difficulty} | {game.points}é» â­
                                                    </p>
                                                    {gameResults[game.id] && (
                                                        <p className="text-sm text-yellow-200 font-bold">
                                                            ğŸ‰ å®Œæˆ {gameResults[game.id]} æ¬¡
                                                        </p>
                                                    )}
                                                </div>
                                                <button
                                                    onClick={() => setCurrentPage(game.id)}
                                                    className="mobile-button bg-white text-purple-700 px-4 py-2 rounded-full font-black hover:bg-yellow-300 transition-all shadow-lg text-sm"
                                                >
                                                    START! ğŸ’«
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
            // çŒœæ•¸å­—éŠæˆ²
            const GuessNumberGame = () => {
                const [targetNumber, setTargetNumber] = useState('');
                const [guess, setGuess] = useState('');
                const [history, setHistory] = useState([]);
                const [attempts, setAttempts] = useState(0);
                const [gameOver, setGameOver] = useState(false);
                
                useEffect(() => {
                    resetNumberGame();
                }, []);
                
                const generateNewTargetNumber = () => {
                    const digits = [];
                    while (digits.length < 3) {
                        const digit = Math.floor(Math.random() * 10).toString();
                        if (!digits.includes(digit)) {
                            digits.push(digit);
                        }
                    }
                    return digits.join('');
                };

                const checkGuess = () => {
                    if (guess.length !== 3 || new Set(guess.split('')).size !== 3) {
                        alert('è«‹è¼¸å…¥3ä½ä¸é‡è¤‡æ•¸å­—ï¼');
                        return;
                    }

                    let a = 0, b = 0;
                    for (let i = 0; i < 3; i++) {
                        if (guess[i] === targetNumber[i]) {
                            a++;
                        } else if (targetNumber.includes(guess[i])) {
                            b++;
                        }
                    }

                    const result = `${guess} - ${a}A${b}B`;
                    setHistory([result, ...history]);
                    setAttempts(attempts + 1);

                    if (a === 3) {
                        setGameOver(true);
                        completeGame('guess-number', 3);
                        setCurrentPage('success-number');
                    } else if (attempts + 1 >= 10) {
                        setGameOver(true);
                    }

                    setGuess('');
                };

                const resetNumberGame = () => {
                    setGameOver(false);
                    setHistory([]);
                    setGuess('');
                    setAttempts(0);
                    setTargetNumber(generateNewTargetNumber());
                };

                return (
                    <div className="min-h-screen bg-gradient-to-br from-cyan-400 via-purple-500 to-pink-500 p-4 no-zoom">
                        <div className="max-w-sm mx-auto">
                            <div className="mb-4 bg-white/95 backdrop-blur-sm border-4 border-white shadow-xl rounded-2xl overflow-hidden">
                                <div className="bg-gradient-to-r from-blue-400 to-purple-500 text-white p-4">
                                    <h2 className="text-center font-black text-xl">ğŸ”¢ æ•¸å­—éŠæˆ²</h2>
                                    <p className="text-center text-sm text-white/90 font-semibold mt-1">
                                        çŒœå‡º3ä½ä¸é‡è¤‡æ•¸å­—ï¼A=ä½ç½®å’Œæ•¸å­—éƒ½å°ï¼ŒB=æ•¸å­—å°ä½†ä½ç½®éŒ¯ âœ¨
                                    </p>
                                    <p className="text-center text-xs text-white/80 mt-1">
                                        å‰©é¤˜æ©Ÿæœƒ: {10 - attempts} æ¬¡
                                    </p>
                                </div>
                                <div className="p-6">
                                    {!gameOver || (gameOver && attempts < 10) ? (
                                        <div className="space-y-4">
                                            <div className="space-y-3">
                                                <input
                                                    type="tel"
                                                    value={guess}
                                                    onChange={(e) => setGuess(e.target.value.replace(/\D/g, '').slice(0, 3))}
                                                    placeholder="è¼¸å…¥3ä½æ•¸å­—"
                                                    className="w-full p-4 border-4 border-purple-300 rounded-full text-center text-xl font-bold focus:border-pink-400 focus:outline-none bg-white text-gray-800"
                                                    maxLength={3}
                                                    disabled={gameOver && attempts >= 10}
                                                />
                                                <button
                                                    onClick={checkGuess}
                                                    className="w-full bg-gradient-to-r from-cyan-400 to-blue-500 text-white px-6 py-4 rounded-full font-black shadow-lg border-2 border-white"
                                                    disabled={gameOver && attempts >= 10}
                                                >
                                                    çŒœæ¸¬! ğŸ’«
                                                </button>
                                            </div>
                                            
                                            <div className="max-h-48 overflow-y-auto space-y-2">
                                                {history.map((result, index) => (
                                                    <div key={index} className="p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full text-center font-bold text-purple-700 border-2 border-purple-200">
                                                        {result}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center space-y-4">
                                            <div className="text-4xl animate-pulse">ğŸ˜… éŠæˆ²çµæŸ</div>
                                            <div className="text-lg font-bold text-purple-700 bg-purple-100 rounded-full px-4 py-2">
                                                ç­”æ¡ˆæ˜¯: {targetNumber}
                                            </div>
                                            <div className="text-xl font-black text-red-600 bg-red-100 rounded-full px-6 py-3">âŒ éŠæˆ²å¤±æ•—ï¼æœªç²å¾—é»æ•¸</div>
                                            <button
                                                onClick={resetNumberGame}
                                                className="w-full bg-gradient-to-r from-green-400 to-emerald-500 text-white px-6 py-4 rounded-full font-black shadow-lg border-4 border-white"
                                            >
                                                å†æŒ‘æˆ°ä¸€æ¬¡! ğŸ’ª
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <button
                                onClick={() => setCurrentPage('home')}
                                className="w-full bg-gradient-to-r from-gray-400 to-gray-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white"
                            >
                                å›åˆ°é¦–é  ğŸ 
                            </button>
                        </div>
                    </div>
                );
            };

            // ç¿»ç‰Œé€£é€£çœ‹éŠæˆ²
            const MemoryCardGame = () => {
                const [cards, setCards] = useState([]);
                const [flippedCards, setFlippedCards] = useState([]);
                const [matchedCards, setMatchedCards] = useState([]);
                const [gameOver, setGameOver] = useState(false);
                const [timeLeft, setTimeLeft] = useState(60);
                const [timerActive, setTimerActive] = useState(false);

                const emojis = ['ğŸ’–', 'ğŸŒˆ', 'âœ¨', 'ğŸŒŸ', 'ğŸ’«', 'ğŸ‰', 'ğŸˆ', 'ğŸ¦„'];
                
                useEffect(() => {
                    initializeGame();
                }, []);

                useEffect(() => {
                    let interval = null;
                    if (timerActive && timeLeft > 0 && !gameOver) {
                        interval = setInterval(() => {
                            setTimeLeft(timeLeft => {
                                if (timeLeft <= 1) {
                                    setGameOver(true);
                                    setTimerActive(false);
                                    return 0;
                                }
                                return timeLeft - 1;
                            });
                        }, 1000);
                    } else if (timeLeft === 0 && !gameOver) {
                        setGameOver(true);
                        setTimerActive(false);
                    }
                    return () => clearInterval(interval);
                }, [timerActive, timeLeft, gameOver]);
                
                const initializeGame = () => {
                    const gameCards = [...emojis, ...emojis].map((emoji, index) => ({
                        id: index,
                        emoji
                    }));
                    
                    for (let i = gameCards.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [gameCards[i], gameCards[j]] = [gameCards[j], gameCards[i]];
                    }
                    
                    setCards(gameCards);
                    setFlippedCards([]);
                    setMatchedCards([]);
                    setGameOver(false);
                    setTimeLeft(60);
                    setTimerActive(true);
                };

                const flipCard = (cardId) => {
                    if (gameOver || flippedCards.length === 2 || flippedCards.includes(cardId) || matchedCards.includes(cardId)) {
                        return;
                    }

                    const newFlipped = [...flippedCards, cardId];
                    setFlippedCards(newFlipped);

                    if (newFlipped.length === 2) {
                        const [first, second] = newFlipped;
                        const firstCard = cards.find(c => c.id === first);
                        const secondCard = cards.find(c => c.id === second);
                        if (firstCard && secondCard && firstCard.emoji === secondCard.emoji) {
                            const newMatched = [...matchedCards, first, second];
                            setMatchedCards(newMatched);
                            
                            if (newMatched.length === cards.length) {
                                completeGame('memory-card', 3);
                                setTimerActive(false);
                                setCurrentPage('success-memory');
                                return;
                            }
                        }

                        setTimeout(() => setFlippedCards([]), 1000);
                    }
                };
                const formatTime = (seconds) => {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins}:${secs.toString().padStart(2, '0')}`;
                };
                return (
                    <div className="min-h-screen bg-gradient-to-br from-pink-400 via-purple-500 to-cyan-400 p-4 no-zoom">
                        <div className="max-w-sm mx-auto">
                            <div className="mb-4 bg-white/95 backdrop-blur-sm border-4 border-white shadow-xl rounded-2xl overflow-hidden">
                                <div className="bg-gradient-to-r from-pink-400 to-purple-500 text-white p-4">
                                    <h2 className="text-center font-black text-xl">ğŸ´ è¨˜æ†¶éŠæˆ²</h2>
                                    <p className="text-center text-sm text-white/90 font-semibold mt-1">
                                        ç¿»é–‹ç›¸åŒçš„å¡ç‰‡é€²è¡Œé…å°ï¼âœ¨
                                    </p>
                                    <div className="text-center mt-2">
                                        <span className={`text-lg font-black ${timeLeft <= 10 ? 'text-red-200 animate-pulse' : 'text-white'}`}>
                                            â° {formatTime(timeLeft)}
                                        </span>
                                    </div>
                                </div>
                                <div className="p-6">
                                    {!gameOver && matchedCards.length < cards.length ? (
                                        <div className="grid grid-cols-4 gap-2">
                                            {cards.map((card) => (
                                                <button
                                                    key={card.id}
                                                    onClick={() => flipCard(card.id)}
                                                    className={`aspect-square text-2xl rounded-xl transition-all duration-300 border-2 border-white shadow-lg ${
                                                        flippedCards.includes(card.id) || matchedCards.includes(card.id)
                                                        ? 'bg-gradient-to-r from-yellow-200 to-pink-200 shadow-xl'
                                                            : 'bg-gradient-to-r from-purple-400 to-pink-400 hover:from-purple-500 hover:to-pink-500'
                                                    } ${matchedCards.includes(card.id) ? 'opacity-60' : ''}`}
                                                >
                                                    {flippedCards.includes(card.id) || matchedCards.includes(card.id) ? card.emoji : 'ğŸ’«'}
                                                </button>
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="text-center space-y-4">
                                            <div className="text-4xl animate-pulse">
                                                {matchedCards.length === cards.length ? 'ğŸ‰ æ­å–œéé—œï¼' : 'â° æ™‚é–“åˆ°äº†ï¼'}
                                            </div>
                                            <div className="text-lg font-bold text-purple-700 bg-purple-100 rounded-full px-4 py-2">
                                                å·²é…å°: {matchedCards.length / 2} / 8 çµ„
                                            </div>
                                            <div className="text-xl font-black text-red-600 bg-red-100 rounded-full px-6 py-3">
                                                {matchedCards.length === cards.length ? 'ç²å¾—çå‹µï¼' : 'âŒ éŠæˆ²å¤±æ•—ï¼æœªç²å¾—é»æ•¸'}
                                            </div>
                                            <button
                                                onClick={initializeGame}
                                                className="w-full bg-gradient-to-r from-green-400 to-emerald-500 text-white px-6 py-4 rounded-full font-black shadow-lg border-4 border-white"
                                            >
                                                å†æŒ‘æˆ°ä¸€æ¬¡! ğŸ’ª
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <button
                                onClick={() => setCurrentPage('home')}
                                className="w-full bg-gradient-to-r from-gray-400 to-gray-600 text-white py-4 rounded-full font-black shadow-lg border-4 border-white"
                            >
                                å›åˆ°é¦–é  ğŸ 
                            </button>
                        </div>
                    </div>
                );
            };

            // æˆåŠŸé é¢çµ„ä»¶
            const SuccessPage = ({ title, emoji, points, gameId }) => (
                <div className="min-h-screen bg-gradient-to-br from-green-300 via-emerald-400 to-teal-500 p-4 flex items-center justify-center no-zoom">
                    <div className="max-w-sm mx-auto text-center">
                        <div className="bg-white/95 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border-4 border-white">
                            <div className="text-6xl mb-4 animate-bounce">{emoji}</div>
                            <h2 className="text-3xl font-black text-green-700 mb-4">{title}</h2>
                            <div className="space-y-3 mb-6">
                                <div className="text-xl font-black text-green-600 bg-yellow-200 rounded-full px-6 py-3 animate-pulse">
                                    âœ… ç²å¾— {points} é»æ•¸ï¼â­
                                </div>
                            </div>
                            <div className="space-y-3">
                                <button
                                    onClick={() => setCurrentPage(gameId)}
                                    className="mobile-button w-full bg-gradient-to-r from-green-400 to-emerald-500 text-white px-6 py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                >
                                    ğŸ® å†ç©ä¸€æ¬¡
                                </button>
                                <button
                                    onClick={() => setCurrentPage('home')}
                                    className="mobile-button w-full bg-gradient-to-r from-purple-400 to-pink-400 text-white px-6 py-4 rounded-full font-black shadow-lg border-4 border-white text-lg"
                                >
                                    ğŸ  å›åˆ°ä¸»ç•«é¢
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // æ ¹æ“šç•¶å‰é é¢æ¸²æŸ“
            const renderPage = () => {
                switch (currentPage) {
                    case 'guess-number':
                        return <GuessNumberGame />;
                    case 'memory-card':
                        return <MemoryCardGame />;
                    case 'whack-a-mole':
                        return <WhackAMoleGame />;
                    case 'candy-crush':
                        return <CandyCrushGame />;
                    case 'success-number':
                        return <SuccessPage title="æ­å–œéé—œï¼" emoji="ğŸ‰" points={3} gameId="guess-number" />;
                    case 'success-memory':
                        return <SuccessPage title="è¨˜æ†¶é”äººï¼" emoji="ğŸ‰" points={3} gameId="memory-card" />;
                    case 'success-whack-a-mole':
                        return <SuccessPage title="åœ°é¼ å‰‹æ˜Ÿï¼" emoji="ğŸ”¨" points={4} gameId="whack-a-mole" />;
                    case 'success-candy-crush':
                        return <SuccessPage title="ç”œé»å¤§å¸«ï¼" emoji="ğŸ¬" points={5} gameId="candy-crush" />;
                    default:
                        return <HomePage />;
                }
            };

            return renderPage();
        };

        ReactDOM.render(<BirthdayGameApp />, document.getElementById('root'));
